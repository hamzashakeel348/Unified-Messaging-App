"use strict";(()=>{var e={};e.id=38,e.ids=[38],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5471:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>_,patchFetch:()=>v,requestAsyncStorage:()=>y,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var i={};n.r(i),n.d(i,{POST:()=>m,dynamic:()=>d,runtime:()=>l});var r=n(9303),o=n(8716),a=n(670),u=n(7070),p=n(5748),s=n(1221),c=n(9520);let l="nodejs",d="force-dynamic";async function m(e){let t=await (0,c.N)(e);return await (0,p.C)(),t?.account_id&&await s.Z.updateOne({unipile_account_id:t.account_id},{$set:{user_name:t?.name||void 0}},{upsert:!0}),u.NextResponse.json({ok:!0})}let g=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/unipile/notify/route",pathname:"/api/unipile/notify",filename:"route",bundlePath:"app/api/unipile/notify/route"},resolvedPagePath:"/Users/hamzashakeel/Desktop/unipile-inbox-mvp-webhooks/src/app/api/unipile/notify/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:h}=g,_="/api/unipile/notify/route";function v(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},5748:(e,t,n)=>{n.d(t,{C:()=>u});var i=n(1185),r=n.n(i);let o=process.env.MONGODB_URI;if(!o)throw Error("Missing MONGODB_URI");let a=global._mongoose;async function u(){return a.conn||(a.promise||(a.promise=r().connect(o,{dbName:"unipile_inbox_mvp"}).then(e=>e)),a.conn=await a.promise),a.conn}a||(a=global._mongoose={conn:null,promise:null})},1221:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(1185);let r=new i.Schema({platform:{type:String,enum:["google","linkedin"],required:!0},unipile_account_id:{type:String,required:!0,unique:!0},label:{type:String},email:{type:String},linkedin_profile:{type:String},user_name:{type:String}},{timestamps:!0}),o=i.models.Account||(0,i.model)("Account",r)},9520:(e,t,n)=>{n.d(t,{N:()=>i});async function i(e){try{return await e.json()}catch{let t=await e.text();try{return JSON.parse(t)}catch{return{}}}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),i=t.X(0,[948,972],()=>n(5471));module.exports=i})();